function cstmstffAddOptionClasses(e){var s=jQuery(e);s&&s.length>0&&s.each(function(){var e=jQuery(this),s=e.find("th"),t=e.find("td");s.hasClass(obj.classes.label)||s.addClass(obj.classes.label),t.hasClass(obj.classes.value)||t.addClass(obj.classes.value)})}function cstmstffAddWrappers(e){var s=jQuery(e);s&&s.length>0&&s.each(function(){var e=jQuery(this),s=e.siblings("p");s.hasClass(obj.classes.desc)||s.addClass(obj.classes.desc),e.siblings().wrapAll('<div class="'+obj.classes.value+'"></div>'),e.wrap('<div class="'+obj.classes.label+'"></div>')})}function cstmstffInitDate(e){function s(e,s,t){var a=e.find(".date-field-text"),l=a.val().split("/"),i=0;"day"==t?i=1:"year"==t&&(i=2),l[i]=s,a.val(l.join("/"))}var t=e;t&&t.length>0&&t.each(function(){var e=1e3,t=jQuery(this);t.find(".date-field-month").on("change",function(){var e=jQuery(this);jQuery.each(e.find("option"),function(){var a=jQuery(this);e.val()==a.val()?(a.attr("selected","selected"),s(t,a.val(),"month")):a.removeAttr("selected")})}),t.find(".date-field-day").on("keyup",function(){var a=jQuery(this);setTimeout(function(){s(t,a.val(),"day")},e)}),t.find(".date-field-year").on("keyup",function(){var a=jQuery(this);setTimeout(function(){s(t,a.val(),"year")},e)})})}function cstmstffSelectImage(e,s,t){var a;e.click(function(e){return e.preventDefault(),a?void a.open():(a=wp.media.frames.cstmstffSelectImageFrame=wp.media({title:cstmstffSelectImage.title,button:{text:cstmstffSelectImage.selectButton},library:{type:"image"}}),a.on("select",function(){var e=a.state().get("selection").first().toJSON();s.val(e.url),t.attr("src",e.url)}),void a.open())})}var prefix="cstmstff",obj={lang:"custom-stuff",prefix:prefix,classes:{admin:prefix+"-plugin-admin",field:"form-field",row:"form-field-row",column:"form-field-column",label:"form-field-label",value:"form-field-value",desc:"description"}};jQuery(document).ready(function(e){var s="."+obj.classes.admin+" ."+obj.classes.field;cstmstffAddOptionClasses(s),cstmstffAddWrappers(s+":not(."+obj.classes.column+") > label"),cstmstffInitDate(e("."+obj.classes.field+"-date")),e(".color-picker").wpColorPicker(),e(".wp-picker-clear").each(function(){var s=e(this),t=s.parents("."+obj.classes.value);s.click(function(){t.find(".selected-color").remove()})});var t='input[type="url"]',a=e(".media-select");a.each(function(){var s=e(this),a=s.parents("."+obj.classes.value);cstmstffSelectImage(s,a.find(t),a.find(".selected-media img"))});var l=e(".media-reset");l.each(function(){var s=e(this),a=s.parents("."+obj.classes.value);s.click(function(){a.find(t).val(""),a.find(".selected-media").remove()})})});