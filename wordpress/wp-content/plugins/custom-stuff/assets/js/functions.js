function cstmstffAddOptionClasses(e){var t=jQuery(e),i=pluginObj.fieldLabel.replace(".",""),a=pluginObj.fieldValue.replace(".","");t&&t.length>0&&t.each(function(){var e=jQuery(this),t=e.find("th"),n=e.find("td");t.hasClass(i)||t.addClass(i),n.hasClass(a)||n.addClass(a)})}function cstmstffInitDate(e){function t(e,t,i){var a=e.find(".date-field-text"),n=a.val().split("/"),l=0;"day"==i?l=1:"year"==i&&(l=2),n[l]=t,a.val(n.join("/"))}var i=e;i&&i.length>0&&i.each(function(){var e=1e3,i=jQuery(this);i.find(".date-field-month").on("change",function(){var e=jQuery(this);jQuery.each(e.find("option"),function(){var a=jQuery(this);e.val()==a.val()?(a.attr("selected","selected"),t(i,a.val(),"month")):a.removeAttr("selected")})}),i.find(".date-field-day").on("keyup",function(){var a=jQuery(this);setTimeout(function(){t(i,a.val(),"day")},e)}),i.find(".date-field-year").on("keyup",function(){var a=jQuery(this);setTimeout(function(){t(i,a.val(),"year")},e)})})}function cstmstffSelectImage(e,t,i){var a;e.click(function(e){return e.preventDefault(),a?void a.open():(a=wp.media.frames.cstmstffSelectImageFrame=wp.media({title:cstmstffSelectImage.title,button:{text:cstmstffSelectImage.selectButton},library:{type:"image"}}),a.on("select",function(){var e=a.state().get("selection").first().toJSON();t.val(e.url),i.attr("src",e.url)}),void a.open())})}var pluginObj={lang:"custom-stuff",prefix:"cstmstff",fieldLabel:".form-field-label",fieldValue:".form-field-value"};jQuery(document).ready(function(e){cstmstffAddOptionClasses("."+pluginObj.prefix+"-options ."+pluginObj.prefix+"-form-field"),cstmstffInitDate(e(".form-field-date")),e(".color-picker").wpColorPicker(),e(".wp-picker-clear").each(function(){var t=e(this),i=t.parents(pluginObj.fieldValue);t.click(function(){i.find(".selected-color").remove()})});var t='input[type="url"]',i=e(".media-select");i.each(function(){var i=e(this),a=i.parents(pluginObj.fieldValue);cstmstffSelectImage(i,a.find(t),a.find(".selected-media img"))});var a=e(".media-reset");a.each(function(){var i=e(this),a=i.parents(pluginObj.fieldValue);i.click(function(){a.find(t).val(""),a.find(".selected-media").remove()})})});